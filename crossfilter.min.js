// https://crossfilter.github.io/crossfilter/ v1.4.7 Copyright 2019 Mike Bostock
!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r=r||self).crossfilter=t()}(this,(function(){"use strict";if("undefined"!=typeof Uint8Array)var r=function(r){return new Uint8Array(r)},t=function(r,t){if(r.length>=t)return r;var e=new r.constructor(t);return e.set(r),e},e=function(r,t){var e,n;switch(t){case 16:n=r.length,e=new Uint16Array(n);break;case 32:e=function(r){return new Uint32Array(r)}(r.length);break;default:throw new Error("invalid array width!")}return e.set(r),e};function n(r){for(var t=new Array(r),e=-1;++e<r;)t[e]=0;return t}function o(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=r(t)}o.prototype.lengthen=function(r){var e,n;for(e=0,n=this.subarrays;e<n;++e)this[e]=t(this[e],r);this.length=r},o.prototype.add=function(){var t,n,o,u,i;for(u=0,i=this.subarrays;u<i;++u)if(o=(~(t=this.masks[u])&t+1)>>>0,!((n=this.width-32*u)>=32)||o)return n<32&&o&1<<n&&(this[u]=e(this[u],n<<=1),this.width=32*u+n),this.masks[u]|=o,{offset:u,one:o};return this[this.subarrays]=r(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},o.prototype.copy=function(r,t){var e,n;for(e=0,n=this.subarrays;e<n;++e)this[e][r]=this[e][t]},o.prototype.truncate=function(r){var t,e;for(t=0,e=this.subarrays;t<e;++t)for(var n=this.length-1;n>=r;n--)this[t][n]=0;this.length=r},o.prototype.zero=function(r){var t,e;for(t=0,e=this.subarrays;t<e;++t)if(this[t][r])return!1;return!0},o.prototype.zeroExcept=function(r,t,e){var n,o;for(n=0,o=this.subarrays;n<o;++n)if(n===t?this[n][r]&e:this[n][r])return!1;return!0},o.prototype.zeroExceptMask=function(r,t){var e,n;for(e=0,n=this.subarrays;e<n;++e)if(this[e][r]&t[e])return!1;return!0},o.prototype.only=function(r,t,e){var n,o;for(n=0,o=this.subarrays;n<o;++n)if(this[n][r]!=(n===t?e:0))return!1;return!0},o.prototype.onlyExcept=function(r,t,e,n,o){var u,i,f;for(i=0,f=this.subarrays;i<f;++i)if(u=this[i][r],i===t&&(u&=e),u!=(i===n?o:0))return!1;return!0};var u={array8:n,array16:n,array32:n,arrayLengthen:function(r,t){for(var e=r.length;e<t;)r[e++]=0;return r},arrayWiden:function(r,t){if(t>32)throw new Error("invalid array width!");return r},bitarray:o};var i={filterExact:(r,t)=>(function(e){var n=e.length;return[r.left(e,t,0,n),r.right(e,t,0,n)]}),filterRange:(r,t)=>{var e=t[0],n=t[1];return function(t){var o=t.length;return[r.left(t,e,0,o),r.left(t,n,0,o)]}},filterAll:r=>[0,r.length]},f=r=>r,a=()=>null,l=()=>0;function c(r){function t(r,t,n){for(var o=n-t,u=1+(o>>>1);--u>0;)e(r,u,o,t);return r}function e(t,e,n,o){for(var u,i=t[--o+e],f=r(i);(u=e<<1)<=n&&(u<n&&r(t[o+u])>r(t[o+u+1])&&u++,!(f<=r(t[o+u])));)t[o+e]=t[o+u],e=u;t[o+e]=i}return t.sort=function(r,t,n){for(var o,u=n-t;--u>0;)o=r[t],r[t]=r[t+u],r[t+u]=o,e(r,1,u,t);return r},t}const s=c(f);function h(r){var t=s.by(r);return function(e,n,o,u){var i,f,a,l=new Array(u=Math.min(o-n,u));for(f=0;f<u;++f)l[f]=e[n++];if(t(l,0,u),n<o){i=r(l[0]);do{r(a=e[n])>i&&(l[0]=a,i=r(t(l,0,u)[0]))}while(++n<o)}return l}}s.by=c;const v=h(f);function p(r){function t(t,e,n,o){for(;n<o;){var u=n+o>>>1;e<r(t[u])?o=u:n=u+1}return n}return t.right=t,t.left=function(t,e,n,o){for(;n<o;){var u=n+o>>>1;r(t[u])<e?n=u+1:o=u}return n},t}v.by=h;const d=p(f);function y(r){return function(t,e,n){for(var o=e+1;o<n;++o){for(var u=o,i=t[o],f=r(i);u>e&&r(t[u-1])>f;--u)t[u]=t[u-1];t[u]=i}return t}}d.by=p;const g=y(f);g.by=y;var b=(r,t,e)=>{for(var n=0,o=t.length,u=e?JSON.parse(JSON.stringify(r)):new Array(o);n<o;++n)u[n]=r[t[n]];return u};function _(r){var t=g.by(r);function e(r,e,o){return(o-e<m?t:n)(r,e,o)}function n(t,n,o){var u,i=(o-n)/6|0,f=n+i,a=o-1-i,l=n+o-1>>1,c=l-i,s=l+i,h=t[f],v=r(h),p=t[c],d=r(p),y=t[l],g=r(y),b=t[s],_=r(b),m=t[a],w=r(m);v>d&&(u=h,h=p,p=u,u=v,v=d,d=u),_>w&&(u=b,b=m,m=u,u=_,_=w,w=u),v>g&&(u=h,h=y,y=u,u=v,v=g,g=u),d>g&&(u=p,p=y,y=u,u=d,d=g,g=u),v>_&&(u=h,h=b,b=u,u=v,v=_,_=u),g>_&&(u=y,y=b,b=u,u=g,g=_,_=u),d>w&&(u=p,p=m,m=u,u=d,d=w,w=u),d>g&&(u=p,p=y,y=u,u=d,d=g,g=u),_>w&&(u=b,b=m,m=u,u=_,_=w,w=u);var x=p,E=d,A=b,O=_;t[f]=h,t[c]=t[n],t[l]=y,t[s]=t[o-1],t[a]=m;var k=n+1,z=o-2,j=E<=O&&E>=O;if(j)for(var S=k;S<=z;++S){var M=t[S],F=r(M);if(F<E)S!==k&&(t[S]=t[k],t[k]=M),++k;else if(F>E)for(;;){var $=r(t[z]);if(!($>E)){if($<E){t[S]=t[k],t[k++]=t[z],t[z--]=M;break}t[S]=t[z],t[z--]=M;break}z--}}else!function(){for(var e=k;e<=z;e++){var n=t[e],o=r(n);if(o<E)e!==k&&(t[e]=t[k],t[k]=n),++k;else if(o>O)for(;;){var u=r(t[z]);if(!(u>O)){u<E?(t[e]=t[k],t[k++]=t[z],t[z--]=n):(t[e]=t[z],t[z--]=n);break}if(--z<e)break}}}();return t[n]=t[k-1],t[k-1]=x,t[o-1]=t[z+1],t[z+1]=A,e(t,n,k-1),e(t,z+2,o),j?t:(k<f&&z>a&&function(){for(var e,n;(e=r(t[k]))<=E&&e>=E;)++k;for(;(n=r(t[z]))<=O&&n>=O;)--z;for(var o=k;o<=z;o++){var u=t[o],i=r(u);if(i<=E&&i>=E)o!==k&&(t[o]=t[k],t[k]=u),k++;else if(i<=O&&i>=O)for(;;){if(!((n=r(t[z]))<=O&&n>=O)){n<E?(t[o]=t[k],t[k++]=t[z],t[z--]=u):(t[o]=t[z],t[z--]=u);break}if(--z<o)break}}}(),e(t,k,z+1))}return e}var m=32;const w=_(f);w.by=_;var x={reduceIncrement:r=>r+1,reduceDecrement:r=>r-1,reduceAdd:r=>(function(t,e){return t+ +r(e)}),reduceSubtract:r=>(function(t,e){return t-r(e)})},E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},A="Expected a function",O="__lodash_hash_undefined__",k=1/0,z="[object Function]",j="[object GeneratorFunction]",S="[object Symbol]",M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/,$=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,N=/^\[object .+?Constructor\]$/,I="object"==typeof E&&E&&E.Object===Object&&E,T="object"==typeof self&&self&&self.Object===Object&&self,U=I||T||Function("return this")();var D,L=Array.prototype,P=Function.prototype,W=Object.prototype,J=U["__core-js_shared__"],q=(D=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",G=P.toString,B=W.hasOwnProperty,H=W.toString,K=RegExp("^"+G.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=U.Symbol,V=L.splice,X=fr(U,"Map"),Y=fr(Object,"create"),Z=Q?Q.prototype:void 0,rr=Z?Z.toString:void 0;function tr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function er(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function nr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function or(r,t){for(var e,n,o=r.length;o--;)if((e=r[o][0])===(n=t)||e!=e&&n!=n)return o;return-1}function ur(r){return!(!vr(r)||(t=r,q&&q in t))&&(hr(r)||function(r){var t=!1;if(null!=r&&"function"!=typeof r.toString)try{t=!!(r+"")}catch(r){}return t}(r)?K:N).test(function(r){if(null!=r){try{return G.call(r)}catch(r){}try{return r+""}catch(r){}}return""}(r));var t}function ir(r,t){var e,n,o=r.__data__;return("string"==(n=typeof(e=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?o["string"==typeof t?"string":"hash"]:o.map}function fr(r,t){var e=function(r,t){return null==r?void 0:r[t]}(r,t);return ur(e)?e:void 0}tr.prototype.clear=function(){this.__data__=Y?Y(null):{}},tr.prototype.delete=function(r){return this.has(r)&&delete this.__data__[r]},tr.prototype.get=function(r){var t=this.__data__;if(Y){var e=t[r];return e===O?void 0:e}return B.call(t,r)?t[r]:void 0},tr.prototype.has=function(r){var t=this.__data__;return Y?void 0!==t[r]:B.call(t,r)},tr.prototype.set=function(r,t){return this.__data__[r]=Y&&void 0===t?O:t,this},er.prototype.clear=function(){this.__data__=[]},er.prototype.delete=function(r){var t=this.__data__,e=or(t,r);return!(e<0)&&(e==t.length-1?t.pop():V.call(t,e,1),!0)},er.prototype.get=function(r){var t=this.__data__,e=or(t,r);return e<0?void 0:t[e][1]},er.prototype.has=function(r){return or(this.__data__,r)>-1},er.prototype.set=function(r,t){var e=this.__data__,n=or(e,r);return n<0?e.push([r,t]):e[n][1]=t,this},nr.prototype.clear=function(){this.__data__={hash:new tr,map:new(X||er),string:new tr}},nr.prototype.delete=function(r){return ir(this,r).delete(r)},nr.prototype.get=function(r){return ir(this,r).get(r)},nr.prototype.has=function(r){return ir(this,r).has(r)},nr.prototype.set=function(r,t){return ir(this,r).set(r,t),this};var ar=cr((function(r){var t;r=null==(t=r)?"":function(r){if("string"==typeof r)return r;if(pr(r))return rr?rr.call(r):"";var t=r+"";return"0"==t&&1/r==-k?"-0":t}(t);var e=[];return $.test(r)&&e.push(""),r.replace(C,(function(r,t,n,o){e.push(n?o.replace(R,"$1"):t||r)})),e}));function lr(r){if("string"==typeof r||pr(r))return r;var t=r+"";return"0"==t&&1/r==-k?"-0":t}function cr(r,t){if("function"!=typeof r||t&&"function"!=typeof t)throw new TypeError(A);var e=function(){var n=arguments,o=t?t.apply(this,n):n[0],u=e.cache;if(u.has(o))return u.get(o);var i=r.apply(this,n);return e.cache=u.set(o,i),i};return e.cache=new(cr.Cache||nr),e}cr.Cache=nr;var sr=Array.isArray;function hr(r){var t=vr(r)?H.call(r):"";return t==z||t==j}function vr(r){var t=typeof r;return!!r&&("object"==t||"function"==t)}function pr(r){return"symbol"==typeof r||function(r){return!!r&&"object"==typeof r}(r)&&H.call(r)==S}var dr=function(r,t,e){var n=-1,o=(t=function(r,t){if(sr(r))return!1;var e=typeof r;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=r&&!pr(r))||(F.test(r)||!M.test(r)||null!=t&&r in Object(t))}(t,r)?[t]:function(r){return sr(r)?r:ar(r)}(t)).length;for(o||(r=void 0,o=1);++n<o;){var u=null==r?void 0:r[lr(t[n])];void 0===u&&(n=o,u=e),r=hr(u)?u.call(r):u}return r},yr=-1;function gr(){var r,t={add:y,remove:function(t){for(var u=br(n,n),i=[],f="function"==typeof t,a=0,l=0;a<n;++a)c=a,(f?t(e[c],c):r.zero(c))?(i.push(a),u[a]=yr):u[a]=l++;var c;o.forEach((function(r){r(-1,-1,[],i,!0)})),h.forEach((function(r){r(u)}));for(var s=0,v=0;s<n;++s)u[s]!==yr&&(s!==v&&(r.copy(v,s),e[v]=e[s]),++v);e.length=n=v,r.truncate(v),_("dataRemoved")},dimension:function(t,p){if("string"==typeof t){var y=t;t=function(r){return dr(r,y)}}var g,m,E,A,O,k,z,j,S,M,F,$,C,R,N,I,T={filter:function(r){return null==r?Z():Array.isArray(r)?Y(r):"function"==typeof r?rr(r):X(r)},filterExact:X,filterRange:Y,filterFunction:rr,filterAll:Z,currentFilter:function(){return R},hasCurrentFilter:function(){return N},top:function(t,n){var o,u=[],i=q,f=0;n&&n>0&&(f=n);for(;--i>=J&&t>0;)r.zero(o=k[i])&&(f>0?--f:(u.push(e[o]),--t));if(p)for(i=0;i<U.length&&t>0;i++)r.zero(o=U[i])&&(f>0?--f:(u.push(e[o]),--t));return u},bottom:function(t,n){var o,u,i=[],f=0;n&&n>0&&(f=n);if(p)for(o=0;o<U.length&&t>0;o++)r.zero(u=U[o])&&(f>0?--f:(i.push(e[u]),--t));o=J;for(;o<q&&t>0;)r.zero(u=k[o])&&(f>0?--f:(i.push(e[u]),--t)),o++;return i},group:er,groupAll:function(){var r=er(a),t=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return t()[0].value},r},dispose:nr,remove:nr,accessor:t,id:function(){return A}},U=[],D=w.by((function(r){return z[r]})),L=i.filterAll,P=[],W=[],J=0,q=0,G=0;c.unshift(H),c.push(K),h.push(Q);var B=r.add();function H(e,o,i){if(p){G=0,P=0,I=[];for(var f=0;f<e.length;f++)for(P=0,I=t(e[f]);P<I.length;P++)G++;z=[],M=_r(e.length),$=br(G,1);for(var a=_r(G),l=0,c=0;c<e.length;c++)if((I=t(e[c])).length)for(M[c]=I.length,P=0;P<I.length;P++)z.push(I[P]),a[l]=c,l++;else M[c]=0,U.push(c+o);var s=D(_r(G),0,G);z=b(z,s),j=b(a,s)}else z=e.map(t),j=D(_r(i),0,i),z=b(z,j);p&&(i=G);var h=L(z),v=h[0],d=h[1];if(C)for(var y=0;y<i;++y)C(z[y],y)||(r[E][j[y]+o]|=g,p&&($[y]=1));else{for(var _=0;_<v;++_)r[E][j[_]+o]|=g,p&&($[_]=1);for(var m=d;m<i;++m)r[E][j[m]+o]|=g,p&&($[m]=1)}if(!o)return O=z,k=j,S=M,F=$,J=v,void(q=d);var w,x=O,A=k,R=F,N=0;if(f=0,p&&(w=o,o=x.length,i=G),O=p?new Array(o+i):new Array(n),k=p?new Array(o+i):br(n,n),p&&(F=br(o+i,1)),p){var T=S.length;S=u.arrayLengthen(S,n);for(var P=0;P+T<n;P++)S[P+T]=M[P]}for(var W=0;f<o&&N<i;++W)x[f]<z[N]?(O[W]=x[f],p&&(F[W]=R[f]),k[W]=A[f++]):(O[W]=z[N],p&&(F[W]=$[N]),k[W]=j[N++]+(p?w:o));for(;f<o;++f,++W)O[W]=x[f],p&&(F[W]=R[f]),k[W]=A[f];for(;N<i;++N,++W)O[W]=z[N],p&&(F[W]=$[N]),k[W]=j[N]+(p?w:o);h=L(O),J=h[0],q=h[1]}function K(r,t,e){P.forEach((function(r){r(z,j,t,e)})),z=j=null}function Q(r){if(p){for(var t=0,e=0;t<U.length;t++)r[U[t]]!==yr&&(U[e]=r[U[t]],e++);for(U.length=e,t=0,e=0;t<n;t++)r[t]!==yr&&(e!==t&&(S[e]=S[t]),e++);S.length=e}for(var o,u=O.length,i=0,f=0;i<u;++i)r[o=k[i]]!==yr&&(i!==f&&(O[f]=O[i]),k[f]=r[o],p&&(F[f]=F[i]),++f);for(O.length=f,p&&(F.length=f);f<u;)k[f++]=0;var a=L(O);J=a[0],q=a[1]}function V(t){var e=t[0],n=t[1];if(C)return C=null,tr((function(r,t){return e<=t&&t<n}),0===t[0]&&t[1]===O.length),J=e,q=n,T;var u,i,f,a=[],l=[],c=[],s=[];if(e<J)for(u=e,i=Math.min(J,n);u<i;++u)a.push(k[u]),c.push(u);else if(e>J)for(u=J,i=Math.min(e,q);u<i;++u)l.push(k[u]),s.push(u);if(n>q)for(u=Math.max(e,q),i=n;u<i;++u)a.push(k[u]),c.push(u);else if(n<q)for(u=Math.max(J,n),i=q;u<i;++u)l.push(k[u]),s.push(u);if(p){var h=[],v=[];for(u=0;u<a.length;u++)S[a[u]]++,F[c[u]]=0,1===S[a[u]]&&(r[E][a[u]]^=g,h.push(a[u]));for(u=0;u<l.length;u++)S[l[u]]--,F[s[u]]=1,0===S[l[u]]&&(r[E][l[u]]^=g,v.push(l[u]));if(a=h,l=v,0===t[0]&&t[1]===O.length)for(u=0;u<U.length;u++)r[E][f=U[u]]&g&&(r[E][f]^=g,a.push(f));else for(u=0;u<U.length;u++)r[E][f=U[u]]&g||(r[E][f]^=g,l.push(f))}else{for(u=0;u<a.length;u++)r[E][a[u]]^=g;for(u=0;u<l.length;u++)r[E][l[u]]^=g}return J=e,q=n,o.forEach((function(r){r(g,E,a,l)})),_("filtered"),T}function X(r){return R=r,N=!0,V((L=i.filterExact(d,r))(O))}function Y(r){return R=r,N=!0,V((L=i.filterRange(d,r))(O))}function Z(){return R=void 0,N=!1,V((L=i.filterAll)(O))}function rr(r){R=r,N=!0,C=r,L=i.filterAll,tr(r,!1);var t=L(O);return J=t[0],q=t[1],T}function tr(t,e){var n,u,i,f=[],a=[],l=[],c=[],s=O.length;if(!p)for(n=0;n<s;++n)!(r[E][u=k[n]]&g)^!!(i=t(O[n],n))&&(i?f.push(u):a.push(u));if(p)for(n=0;n<s;++n)t(O[n],n)?(f.push(k[n]),l.push(n)):(a.push(k[n]),c.push(n));if(p){var h=[],v=[];for(n=0;n<f.length;n++)1===F[l[n]]&&(S[f[n]]++,F[l[n]]=0,1===S[f[n]]&&(r[E][f[n]]^=g,h.push(f[n])));for(n=0;n<a.length;n++)0===F[c[n]]&&(S[a[n]]--,F[c[n]]=1,0===S[a[n]]&&(r[E][a[n]]^=g,v.push(a[n])));if(f=h,a=v,e)for(n=0;n<U.length;n++)r[E][u=U[n]]&g&&(r[E][u]^=g,f.push(u));else for(n=0;n<U.length;n++)r[E][u=U[n]]&g||(r[E][u]^=g,a.push(u))}else{for(n=0;n<f.length;n++)r[E][f[n]]&g&&(r[E][f[n]]&=m);for(n=0;n<a.length;n++)r[E][a[n]]&g||(r[E][a[n]]|=g)}o.forEach((function(r){r(g,E,f,a)})),_("filtered")}function er(t){var i={top:function(r){var t=y(J(),0,c.length,r);return b.sort(t,0,t.length)},all:J,reduce:q,reduceCount:G,reduceSum:function(r){return q(x.reduceAdd(r),x.reduceSubtract(r),l)},order:B,orderNatural:function(){return B(f)},size:function(){return M},dispose:H,remove:H};W.push(i);var c,d,y,b,_,w,A,z,j=8,S=mr(j),M=0,F=a,$=a,C=!0,R=t===a;function N(i,f,l,s){p&&(z=l,l=O.length-i.length,s=i.length);var h,v,y,g,b,x,k=c,N=p?[]:br(M,S),I=_,P=w,W=A,J=M,q=0,G=0;for(C&&(I=W=a),C&&(P=W=a),c=new Array(M),M=0,d=p?J?d:[]:J>1?u.arrayLengthen(d,n):br(n,S),J&&(y=(v=k[0]).key);G<s&&!((g=t(i[G]))>=g);)++G;for(;G<s;){for(v&&y<=g?(b=v,x=y,N[q]=M,(v=k[++q])&&(y=v.key)):(b={key:g,value:W()},x=g),c[M]=b;g<=x&&(h=f[G]+(p?z:l),p?d[h]?d[h].push(M):d[h]=[M]:d[h]=M,b.value=I(b.value,e[h],!0),r.zeroExcept(h,E,m)||(b.value=P(b.value,e[h],!1)),!(++G>=s));)g=t(i[G]);H()}for(;q<J;)c[N[q]=M]=k[q++],H();if(p)for(var B=0;B<n;B++)d[B]||(d[B]=[]);if(M>q)if(p)for(q=0;q<z;++q)for(B=0;B<d[q].length;B++)d[q][B]=N[d[q][B]];else for(q=0;q<l;++q)d[q]=N[d[q]];function H(){p?M++:++M===S&&(N=u.arrayWiden(N,j<<=1),d=u.arrayWiden(d,j),S=mr(j))}h=o.indexOf(F),M>1||p?(F=T,$=D):(!M&&R&&(M=1,c=[{key:null,value:W()}]),1===M?(F=U,$=L):(F=a,$=a),d=null),o[h]=F}function I(r){if(M>1||p){var t,e,u,i=M,f=c,l=br(i,i);if(p){for(t=0,u=0;t<n;++t)if(r[t]!==yr){for(d[u]=d[t],e=0;e<d[u].length;e++)l[d[u][e]]=1;++u}}else for(t=0,u=0;t<n;++t)r[t]!==yr&&(l[d[u]=d[t]]=1,++u);for(c=[],M=0,t=0;t<i;++t)l[t]&&(l[t]=M++,c.push(f[t]));if(M>1||p)if(p)for(t=0;t<u;++t)for(e=0;e<d[t].length;++e)d[t][e]=l[d[t][e]];else for(t=0;t<u;++t)d[t]=l[d[t]];else d=null;o[o.indexOf(F)]=M>1||p?($=D,F=T):1===M?($=L,F=U):$=F=a}else if(1===M){if(R)return;for(var s=0;s<n;++s)if(r[s]!==yr)return;c=[],M=0,o[o.indexOf(F)]=F=$=a}}function T(t,n,o,u,i){var f,a,l,s,h;if(!(t===g&&n===E||C))if(p){for(f=0,s=o.length;f<s;++f)if(r.zeroExcept(l=o[f],E,m))for(a=0;a<d[l].length;a++)(h=c[d[l][a]]).value=_(h.value,e[l],!1,a);for(f=0,s=u.length;f<s;++f)if(r.onlyExcept(l=u[f],E,m,n,t))for(a=0;a<d[l].length;a++)(h=c[d[l][a]]).value=w(h.value,e[l],i,a)}else{for(f=0,s=o.length;f<s;++f)r.zeroExcept(l=o[f],E,m)&&((h=c[d[l]]).value=_(h.value,e[l],!1));for(f=0,s=u.length;f<s;++f)r.onlyExcept(l=u[f],E,m,n,t)&&((h=c[d[l]]).value=w(h.value,e[l],i))}}function U(t,n,o,u,i){if(!(t===g&&n===E||C)){var f,a,l,s=c[0];for(f=0,l=o.length;f<l;++f)r.zeroExcept(a=o[f],E,m)&&(s.value=_(s.value,e[a],!1));for(f=0,l=u.length;f<l;++f)r.onlyExcept(a=u[f],E,m,n,t)&&(s.value=w(s.value,e[a],i))}}function D(){var t,o,u;for(t=0;t<M;++t)c[t].value=A();if(p){for(t=0;t<n;++t)for(o=0;o<d[t].length;o++)(u=c[d[t][o]]).value=_(u.value,e[t],!0,o);for(t=0;t<n;++t)if(!r.zeroExcept(t,E,m))for(o=0;o<d[t].length;o++)(u=c[d[t][o]]).value=w(u.value,e[t],!1,o)}else{for(t=0;t<n;++t)(u=c[d[t]]).value=_(u.value,e[t],!0);for(t=0;t<n;++t)r.zeroExcept(t,E,m)||((u=c[d[t]]).value=w(u.value,e[t],!1))}}function L(){var t,o=c[0];for(o.value=A(),t=0;t<n;++t)o.value=_(o.value,e[t],!0);for(t=0;t<n;++t)r.zeroExcept(t,E,m)||(o.value=w(o.value,e[t],!1))}function J(){return C&&($(),C=!1),c}function q(r,t,e){return _=r,w=t,A=e,C=!0,i}function G(){return q(x.reduceIncrement,x.reduceDecrement,l)}function B(r){function t(t){return r(t.value)}return y=v.by(t),b=s.by(t),i}function H(){var r=o.indexOf(F);return r>=0&&o.splice(r,1),(r=P.indexOf(N))>=0&&P.splice(r,1),(r=h.indexOf(I))>=0&&h.splice(r,1),(r=W.indexOf(i))>=0&&W.splice(r,1),i}return arguments.length<1&&(t=f),o.push(F),P.push(N),h.push(I),N(O,k,0,n),G().orderNatural()}function nr(){W.forEach((function(r){r.dispose()}));var t=c.indexOf(H);return t>=0&&c.splice(t,1),(t=c.indexOf(K))>=0&&c.splice(t,1),(t=h.indexOf(Q))>=0&&h.splice(t,1),r.masks[E]&=m,Z()}return E=B.offset,g=B.one,m=~g,A=E<<7|Math.log(g)/Math.log(2),H(e,0,n),K(e,0,n),T},groupAll:function(){var t,u,i,f,a={reduce:p,reduceCount:d,reduceSum:function(r){return p(x.reduceAdd(r),x.reduceSubtract(r),l)},value:function(){s&&(function(){var o;for(t=f(),o=0;o<n;++o)t=u(t,e[o],!0),r.zero(o)||(t=i(t,e[o],!1))}(),s=!1);return t},dispose:y,remove:y},s=!0;function h(o,f){var a;if(!s)for(a=f;a<n;++a)t=u(t,e[a],!0),r.zero(a)||(t=i(t,e[a],!1))}function v(n,o,f,a,l){var c,h,v;if(!s){for(c=0,v=f.length;c<v;++c)r.zero(h=f[c])&&(t=u(t,e[h],l));for(c=0,v=a.length;c<v;++c)r.only(h=a[c],o,n)&&(t=i(t,e[h],l))}}function p(r,t,e){return u=r,i=t,f=e,s=!0,a}function d(){return p(x.reduceIncrement,x.reduceDecrement,l)}function y(){var r=o.indexOf(v);return r>=0&&o.splice(r,1),(r=c.indexOf(h))>=0&&c.splice(r,1),a}return(o.push(v),c.push(h),h(e,0),d())},size:function(){return n},all:function(){return e},allFiltered:function(t){var o=[],u=0,i=g(t||[]);for(u=0;u<n;u++)r.zeroExceptMask(u,i)&&o.push(e[u]);return o},onChange:function(r){if("function"!=typeof r)return void console.warn("onChange callback parameter must be a function!");return p.push(r),function(){p.splice(p.indexOf(r),1)}},isElementFiltered:function(t,e){var n=g(e||[]);return r.zeroExceptMask(t,n)}},e=[],n=0,o=[],c=[],h=[],p=[];function y(o){var u=n,i=o.length;return i&&(e=e.concat(o),r.lengthen(n+=i),c.forEach((function(r){r(o,u,i)})),_("dataAdded")),t}function g(t){var e,n,o,u,i=Array(r.subarrays);for(e=0;e<r.subarrays;e++)i[e]=-1;for(n=0,o=t.length;n<o;n++)i[(u=t[n].id())>>7]&=~(1<<(63&u));return i}function _(r){for(var t=0;t<p.length;t++)p[t](r)}return r=new u.bitarray(0),arguments.length?y(arguments[0]):t}function br(r,t){return(t<257?u.array8:t<65537?u.array16:u.array32)(r)}function _r(r){for(var t=br(r,r),e=-1;++e<r;)t[e]=e;return t}function mr(r){return 8===r?256:16===r?65536:4294967296}return gr.heap=s,gr.heapselect=v,gr.bisect=d,gr.insertionsort=g,gr.permute=b,gr.quicksort=w,gr.version="1.4.7",gr}));
